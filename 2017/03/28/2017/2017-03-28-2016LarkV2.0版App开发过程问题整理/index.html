<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/iBlogWebsite/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/iBlogWebsite/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/iBlogWebsite/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/iBlogWebsite/images/logo.svg" color="#222">

<link rel="stylesheet" href="/iBlogWebsite/css/main.css">


<link rel="stylesheet" href="/iBlogWebsite/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"leeeyou.github.io","root":"/iBlogWebsite/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="1. ImageView的background和src的不同如果两个属性同时存在,用户会看到 src 属性中设置的背景. 但同时 background 设置的背景也存在, 只是被 src 属性挡住了,在后面. src 等于是前景, background 等于是背景.background 会根据 ImageView 组件给定的长宽进行拉伸, 而 src 就存放的是原图的大小, 不会进行拉伸。src">
<meta property="og:type" content="article">
<meta property="og:title" content="2016 Lark V2.0版App开发过程问题整理">
<meta property="og:url" content="https://leeeyou.github.io/iBlogWebsite/2017/03/28/2017/2017-03-28-2016LarkV2.0%E7%89%88App%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="Liyou">
<meta property="og:description" content="1. ImageView的background和src的不同如果两个属性同时存在,用户会看到 src 属性中设置的背景. 但同时 background 设置的背景也存在, 只是被 src 属性挡住了,在后面. src 等于是前景, background 等于是背景.background 会根据 ImageView 组件给定的长宽进行拉伸, 而 src 就存放的是原图的大小, 不会进行拉伸。src">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/01_img_src.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/01_img_background.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/04_event.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/05_shape.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/08_adapter_1.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/08_adapter_2.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/11_event_dispatch.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/11_event_dispatch_2.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/12_9patch_1.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/12_9patch_2.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem//13_fragment_lifecycle.png?raw=true">
<meta property="og:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/16_expandlistview.png?raw=true">
<meta property="article:published_time" content="2017-03-27T16:00:00.000Z">
<meta property="article:modified_time" content="2022-11-29T12:35:27.966Z">
<meta property="article:author" content="Liyou">
<meta property="article:tag" content="知识汇总">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/01_img_src.png?raw=true">

<link rel="canonical" href="https://leeeyou.github.io/iBlogWebsite/2017/03/28/2017/2017-03-28-2016LarkV2.0%E7%89%88App%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>2016 Lark V2.0版App开发过程问题整理 | Liyou</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/iBlogWebsite/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Liyou</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/iBlogWebsite/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/iBlogWebsite/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/iBlogWebsite/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/iBlogWebsite/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://leeeyou.github.io/iBlogWebsite/2017/03/28/2017/2017-03-28-2016LarkV2.0%E7%89%88App%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/6735624?s=460&v=4">
      <meta itemprop="name" content="Liyou">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liyou">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2016 Lark V2.0版App开发过程问题整理
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-28 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-28T00:00:00+08:00">2017-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-29 20:35:27" itemprop="dateModified" datetime="2022-11-29T20:35:27+08:00">2022-11-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/iBlogWebsite/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-ImageView的background和src的不同"><a href="#1-ImageView的background和src的不同" class="headerlink" title="1. ImageView的background和src的不同"></a>1. ImageView的background和src的不同</h1><p>如果两个属性同时存在,用户会看到 src 属性中设置的背景. 但同时 background 设置的背景也存在, 只是被 src 属性挡住了,在后面. src 等于是前景, background 等于是背景.background 会根据 ImageView 组件给定的长宽进行拉伸, 而 src 就存放的是原图的大小, 不会进行拉伸。src 是图片内容（前景）, bg 是背景, 可以同时使用.此外: scaleType 只对 src 起作用,比如在 ImageView 中就可以用 android:scaleType 控制图片的缩放方式 ; bg 可设置透明度.<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/01_img_src.png?raw=true"><br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/01_img_background.png?raw=true"></p>
<h1 id="2-Glide加载圆形图和圆角图"><a href="#2-Glide加载圆形图和圆角图" class="headerlink" title="2. Glide加载圆形图和圆角图"></a>2. Glide加载圆形图和圆角图</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.leeeyou.fixmyproblem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.Resources;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.BitmapShader;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RectF;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;</span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.load.resource.bitmap.BitmapTransformation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Problem02_GlideActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_glide);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">imageUrl</span> <span class="operator">=</span> <span class="string">&quot;http://7xptzi.com1.z0.glb.clouddn.com/19%E4%BA%91%E8%AF%BE%E5%A0%82_06.png&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">img01</span> <span class="operator">=</span> (ImageView) findViewById(R.id.img01);</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">img02</span> <span class="operator">=</span> (ImageView) findViewById(R.id.img02);</span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">img03</span> <span class="operator">=</span> (ImageView) findViewById(R.id.img03);</span><br><span class="line">        <span class="comment">//Glide.with(this).load(imageUrl).thumbnail(0.1f).into(img01);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// play gif</span></span><br><span class="line">        Glide.with(<span class="built_in">this</span>).load(R.mipmap.pkq).into(img01);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// round image</span></span><br><span class="line">        Glide.with(<span class="built_in">this</span>)</span><br><span class="line">                .load(imageUrl)</span><br><span class="line">                .crossFade()</span><br><span class="line">                .transform(<span class="keyword">new</span> <span class="title class_">GlideRoundTransform</span>(<span class="built_in">this</span>))</span><br><span class="line">                .into(img02);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// circle image</span></span><br><span class="line">        Glide.with(<span class="built_in">this</span>)</span><br><span class="line">                .load(imageUrl)</span><br><span class="line">                .crossFade()</span><br><span class="line">                .transform(<span class="keyword">new</span> <span class="title class_">GlideCircleTransform</span>(<span class="built_in">this</span>))</span><br><span class="line">                .into(img03);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlideCircleTransform</span> <span class="keyword">extends</span> <span class="title class_">BitmapTransformation</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">GlideCircleTransform</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(context);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> Bitmap <span class="title function_">transform</span><span class="params">(BitmapPool pool, Bitmap toTransform, <span class="type">int</span> outWidth, <span class="type">int</span> outHeight)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> circleCrop(pool, toTransform);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Bitmap <span class="title function_">circleCrop</span><span class="params">(BitmapPool pool, Bitmap source)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (source == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> Math.min(source.getWidth(), source.getHeight());</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> (source.getWidth() - size) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> (source.getHeight() - size) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">squared</span> <span class="operator">=</span> Bitmap.createBitmap(source, x, y, size, size);</span><br><span class="line"></span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">result</span> <span class="operator">=</span> pool.get(size, size, Bitmap.Config.ARGB_8888);</span><br><span class="line">            <span class="keyword">if</span> (result == <span class="literal">null</span>) &#123;</span><br><span class="line">                result = Bitmap.createBitmap(size, size, Bitmap.Config.ARGB_8888);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Canvas</span> <span class="variable">canvas</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Canvas</span>(result);</span><br><span class="line">            <span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line"></span><br><span class="line">            paint.setShader(<span class="keyword">new</span> <span class="title class_">BitmapShader</span>(squared, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP));</span><br><span class="line">            paint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">float</span> <span class="variable">radius</span> <span class="operator">=</span> size / <span class="number">2f</span>;</span><br><span class="line">            canvas.drawCircle(radius, radius, radius, paint);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getClass().getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlideRoundTransform</span> <span class="keyword">extends</span> <span class="title class_">BitmapTransformation</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="type">float</span> <span class="variable">radius</span> <span class="operator">=</span> <span class="number">0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">GlideRoundTransform</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>(context, <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">GlideRoundTransform</span><span class="params">(Context context, <span class="type">int</span> dp)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(context);</span><br><span class="line">            <span class="built_in">this</span>.radius = Resources.getSystem().getDisplayMetrics().density * dp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> Bitmap <span class="title function_">transform</span><span class="params">(BitmapPool pool, Bitmap toTransform, <span class="type">int</span> outWidth, <span class="type">int</span> outHeight)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> roundCrop(pool, toTransform);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Bitmap <span class="title function_">roundCrop</span><span class="params">(BitmapPool pool, Bitmap source)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (source == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">Bitmap</span> <span class="variable">result</span> <span class="operator">=</span> pool.get(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">            <span class="keyword">if</span> (result == <span class="literal">null</span>) &#123;</span><br><span class="line">                result = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Canvas</span> <span class="variable">canvas</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Canvas</span>(result);</span><br><span class="line">            <span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">            paint.setShader(<span class="keyword">new</span> <span class="title class_">BitmapShader</span>(source, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP));</span><br><span class="line">            paint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">            <span class="type">RectF</span> <span class="variable">rectF</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RectF</span>(<span class="number">0f</span>, <span class="number">0f</span>, source.getWidth(), source.getHeight());</span><br><span class="line">            canvas.drawRoundRect(rectF, radius, radius, paint);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getClass().getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="3-setCompoundDrawablesWithIntrinsicBounds的优势"><a href="#3-setCompoundDrawablesWithIntrinsicBounds的优势" class="headerlink" title="3. setCompoundDrawablesWithIntrinsicBounds的优势"></a>3. setCompoundDrawablesWithIntrinsicBounds的优势</h1><p>有两个方法可以设置控件的上下左右图标，分别是：<br><strong>第一个方法</strong>：setCompoundDrawablesWithIntrinsicBounds(Drawable left, Drawable top, Drawable right, Drawable bottom)<br><strong>第二种方法</strong>：setCompoundDrawables(Drawable left, Drawable top, Drawable right, Drawable bottom)  </p>
<p>它们的区别是使用第二种方法之前必须已经setBound(Rect)了，api原文如下</p>
<blockquote>
<p>Sets the Drawables (if any) to appear to the left of, above, to the right of, and below the text. Use null if you do not want a Drawable there. The Drawables must already have had setBounds(Rect) called.</p>
</blockquote>
<p>所以：<br>如果想手动设置大小的话就要用setCompoundDrawables，事先要给Drawable设置setBounds；<br>如果按照原有比例大小显示图片就使用setCompoundDrawablesWithIntrinsicBounds  </p>
<h1 id="4-滑动事件冲突的处理"><a href="#4-滑动事件冲突的处理" class="headerlink" title="4. 滑动事件冲突的处理"></a>4. 滑动事件冲突的处理</h1><p><strong>场景</strong>：官方比赛数据页签 - 淘汰赛和积分赛数据 → viewpager(水平) + scrollView(垂直) + HorizontalScrollView(水平) / ListView(垂直)<br><strong>分析</strong>：这里的冲突在于水平事件里面嵌套垂直，再嵌套水平和垂直事件<br><strong>解决</strong>：采用内部拦截法配合getParent().requestDisallowInterceptTouchEvent(false);  </p>
<p>效果图如下：<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/04_event.png?raw=true"></p>
<p>这篇日志也记录了<a href="https://leeeyou.github.io/2016/02/29/blog-2016-02-29-Android%E8%89%BA%E6%9C%AF%E6%8E%A2%E7%B4%A2-%E7%AC%AC3%E7%AB%A0-View%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/">Android艺术探索 第3章 View的事件体系</a></p>
<h1 id="5-shape资源整理"><a href="#5-shape资源整理" class="headerlink" title="5. shape资源整理"></a>5. shape资源整理</h1><p><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/05_shape.png?raw=true"></p>
<p><strong>android:shape=[“rectangle” | “oval” | “line” | “ring”]</strong><br>shape的形状，默认为矩形，可以设置为矩形（rectangle）、椭圆形(oval)、线性形状(line)、环形(ring)下面的属性只有在android:shape=”ring时可用：<br>android:innerRadius    尺寸，内环的半径。<br>android:innerRadiusRatio    浮点型，以环的宽度比率来表示内环的半径，例如，如果android:innerRadiusRatio，表示内环半径等于环的宽度除以5，这个值是可以被覆盖的，默认为9.<br>android:thickness    尺寸，环的厚度<br>android:thicknessRatio    浮点型，以环的宽度比率来表示环的厚度，例如，如果android:thicknessRatio=”2”， 那么环的厚度就等于环的宽度除以2。这个值是可以被android:thickness覆盖的，默认值是3.<br>android:useLevel    boolean值，如果当做是LevelListDrawable使用时值为true，否则为false.  </p>
<p><strong>corners</strong><br>android:radius                                 整型半径<br>android:topLeftRadius                    整型左上角半径<br>android:topRightRadius                  整型右上角半径<br>android:bottomLeftRadius              整型左下角半径<br>android:bottomRightRadius            整型右下角半径  </p>
<p><strong>渐变色</strong><br>android:startColor         颜色值 起始颜色<br>android:endColor          颜色值结束颜色<br>android:centerColor      整型渐变中间颜色，即开始颜色与结束颜色之间的颜色<br>android:angle                整型渐变角度(PS:当angle=0时，渐变色是从左向右。 然后逆时针方向转，当angle=90时为从下往上。angle必须为45的整数倍)<br>android:type             [“linear” | “radial” | “sweep”] 渐变类型(取值：linear、radial、sweep)<br>                         linear 线性渐变，这是默认设置<br>                         radial 放射性渐变，以开始色为中心。<br>                         sweep 扫描线式的渐变。<br>android:useLevel             [“true” | “false”]如果要使用LevelListDrawable对象，就要设置为true。设置为true无渐变。false有渐变色<br>android:gradientRadius   整型渐变色半径.当 android:type=”radial” 时才使用。单独使用 android:type=”radial”会报错。<br>android:centerX               整型渐变中心X点坐标的相对位置<br>android:centerY               整型渐变中心Y点坐标的相对位置  </p>
<p><strong>描边</strong><br>android:width                   整型描边的宽度<br>android:color                    颜色值描边的颜色<br>android:dashWidth           整型表示描边的样式是虚线的宽度， 值为0时，表示为实线。值大于0则为虚线。<br>android:dashGap              整型表示描边为虚线时，虚线之间的间隔 即“ - - - - ”  </p>
<h1 id="6-记录bug-Manifest-merger-failed-error"><a href="#6-记录bug-Manifest-merger-failed-error" class="headerlink" title="6. 记录bug:Manifest merger failed error"></a>6. 记录bug:Manifest merger failed error</h1><p>由于build.gradle文件中的defaultConfig中的信息和其他module中的不同。检查minSdkVersion、targetSdkVersion是否和其他module一致</p>
<h1 id="7-整理ripple"><a href="#7-整理ripple" class="headerlink" title="7. 整理ripple"></a>7. 整理ripple</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ripple</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:color</span>=<span class="string">&quot;@color/txt_ed4d4d&quot;</span>&gt;</span><span class="comment">&lt;!-- 波纹颜色 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 定义一个带圆角的背景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 正常状态下的颜色 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/txt_blue&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">stroke</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:width</span>=<span class="string">&quot;2dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:color</span>=<span class="string">&quot;@color/txt_ed4d4d&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:bottomLeftRadius</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:bottomRightRadius</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:topLeftRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:topRightRadius</span>=<span class="string">&quot;8dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ripple</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="8-整理fragment-universalAdapter-notify不成功的原因"><a href="#8-整理fragment-universalAdapter-notify不成功的原因" class="headerlink" title="8. 整理fragment universalAdapter notify不成功的原因"></a>8. 整理fragment universalAdapter notify不成功的原因</h1><p>nofityDataSetChange不成功的原因：<br>1、数据源没有更新，调用notifyDataSetChanged无效。<br>2、数据源更新了，但是它指向新的引用，调用notifyDataSetChanged无效。<br>3、数据源更新了，但是adpter没有收到消息通知，无法动态更新列表。  </p>
<p>由于在Fragment中调用notifyDataSetChange老是不成功，所以决定好好的研究研究为何UniversalAdapter会引起此问题。</p>
<p>其实好好的理解上面三条之后，解决ListView刷新不显示的问题，肯定妥妥的。</p>
<p><strong>总结起来就是：数据源的引用一定不能变，但是塞到数据源中的数据一定要更新。牢牢地掌握好这一条之后，ListView刷新不显示的问题就迎刃而解了。</strong></p>
<p><strong>解决“数据源的引用一定不能变”的问题</strong>，可以提前创建一个List对象， mData = new ArrayList&lt;&gt;(); 之后一直对这个mData倒腾即可，不要再引入新的数据源，也就是不要再改变mData的引用地址。</p>
<p><strong>解决“但是塞到数据源中的数据一定要更新”的问题</strong>，可以通过更新数据完成，万一数据源就是没有更新，又想要塞到数据源中，可以通过<br>mData.clear();<br>mData.addAll(data);<br>方法实现。</p>
<p>这次bug的产生就是由于没有事先创建一个mData的对象，直接将入参赋值给mData，导致执行<br>mData.clear();<br>mData.addAll(data);<br>时，先清空了数据集，然后将空数据集添加到了mData中，此时再去调用notifyDataSetChanged()时，其实生效了，但是数据为0，当然就展示了空白页。</p>
<p>同时需要再次调用setAdapter()方法。</p>
<p>通过这次的bug解决，自己认识到遇到问题时，最好追根究底的去解决它。因为你一定会不止一次遇到这个问题。当你彻底理解和掌握了之后，下次再遇到同样的问题时，显然就不是问题了。</p>
<p>解决方法截图：</p>
<p><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/08_adapter_1.png?raw=true"><br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/08_adapter_2.png?raw=true"></p>
<h1 id="9-记录bug：recyclerView在fragment中-notifyDataSetChange不起作用的问题"><a href="#9-记录bug：recyclerView在fragment中-notifyDataSetChange不起作用的问题" class="headerlink" title="9. 记录bug：recyclerView在fragment中 notifyDataSetChange不起作用的问题"></a>9. 记录bug：recyclerView在fragment中 notifyDataSetChange不起作用的问题</h1><p><strong>现象</strong>：在创建一口价时，activity中放置了两个fragment，选择图片时，跳转到另外一个界面，返回时，又重新创建了fragment<br><strong>分析</strong>：由于采用ViewPager放置两个fragment，在每次切换的是否都创建了新的fragment，导致每次选好照片之后回到viewpager时，又重新创建了新的fragment，所以notifyDataSetChange无效。<br><strong>解决</strong>：两个fragment用全局变量记录保存，不要每次创建新的。<br><strong>后续</strong>：在adapter.getlist.size 返回0时，就应该联想到是否fragment被重新创建了。以此记录  </p>
<h1 id="10-EventBus粘性事件"><a href="#10-EventBus粘性事件" class="headerlink" title="10. EventBus粘性事件"></a>10. EventBus粘性事件</h1><p>EventBus默认支持一条事件总线，通常是通过getDefault()方法获取EventBus实例，但也能通过直接new EventBus这种最简单的方式获取多条事件总线，彼此之间完全分开。例子见com.example.leeeyou.fixmyproblem.Problem05_EventBusActivity</p>
<p>EventBus#Register()其实只做了三件事：  </p>
<ol>
<li>查找订阅者所有的订阅事件  </li>
<li>将订阅事件作为key，所有订阅了此订阅事件的订阅者作为value存放进subscriptionsByEventType  </li>
<li>将订阅者作为key，订阅者的所有订阅事件作为value存放进typesBySubscriber  </li>
</ol>
<p>EventBus#Post()也只做了三件事:  </p>
<ol>
<li>根据订阅事件在subscriptionsByEventType中查找相应的订阅者  </li>
<li>分发订阅者的订阅事件调用线程  </li>
<li>通过反射调用订阅者的订阅事件  </li>
</ol>
<p>粘性事件：发送事件之后再订阅该事件也能收到该事件，跟粘性广播类似。简单来说就是能够收到订阅之前发送的消息。</p>
<h1 id="11-事件传递机制"><a href="#11-事件传递机制" class="headerlink" title="11. 事件传递机制"></a>11. 事件传递机制</h1><p>① 假设最高层View叫OuterLayout，中间层View叫InnerLayout，最底层View叫MyVIew。调用顺序是这样的（假设各个函数返回的都是false）<br>OuterLayout.onInterceptTouchEvent-&gt;InnerLayout.onInterceptTouchEvent-&gt;MyView.onTouchEvent-&gt;InnerLayout.onTouchEvent-&gt;OuterLayout.onTouchEvent。<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/11_event_dispatch.png?raw=true"></p>
<p>② 内部拦截法，子控件拦截父控件事件<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/11_event_dispatch_2.png?raw=true"></p>
<p>③ 注意点<br>一个view一旦拦截一个某个事件，当前事件所在的完整事件序列将都会由这个view去处理，反应在真实的代码中，就是一旦view拦截了down事件，那么此后的move和up事件都将不调用onInterceptTouchEvent，而直接由它处理，这就也意味着在onInterceptTouchEvent处理事件是不合适的，因为有可能来了事件，却直接跳过onInterceptTouchEvent方法。这个也意味着，一旦一个ViewGroup没有拦截ACTION_DOWN，那么这个事件序列的其他Action，它都将收不到，所以在处理ACTION_DOWN的时候，尤其需要谨慎。</p>
<p>④ 注意点<br>onTouchEvent中是要判断MotionEvent的Action，因为一次点击操作就会调用两次onTouchEvent方法，一次是ACTION_DOWN，一次是ACTION_UP，如果手滑一下，还会有若干个ACTION_MOVE</p>
<p>⑤问题：TextView的onTouchEvent的返回值也是True吗？<br>是的，那为什么点在TextView上面还是能触发它的父视图的onTouchEvent，理论上应该是TextView消耗掉这次的事件，不回传。理论上确实是这样，但是因为TextView的clickable和longClickable属性都是false，当这两个属性都为false的时候，是不会消耗事件的，所以TextView不会消耗事件，这也就可以解释为什么把一个TextView放在一个Button上面，然后点击TextView还是能触发Button的点击事件</p>
<p>⑥问题：view的enable状态和onTouchEvent之间的关系<br>它们之间没有关系，只有clickable状态才对onTouchEvent有影响的，还有一点 ，设置 view的enable为false确实也会把view的clickable设成false，但是设置view的onclickListener就又把view的clickable变成了true，所以最后的解决方案就是把那两行代码换下先后顺序，问题就迎刃而解了。</p>
<p>⑦问题：onTouchListener OnTouchEvent OnClickListener<br>onTouchListener是在onTouch方法中生效，而且onTouch要先于onTouchEvent，就是说一旦设置了onTouchListener并且最后onTouch方法返回了True，那onTouchEvent将不会再被执行。而onClickListener和onTouchEvent有些关系，onTouchEvent的默认实现里会调用onClickListener的onClick方法，如果重写了onTouchEvent，因为onClickListener接受不到ACTION_DOWN和ACTION_UP，那么再设置onClickListener也就不会再生效了，这个时候的单击或者长按处理只能在onTouchEvent中自己处理。</p>
<h1 id="12-patch"><a href="#12-patch" class="headerlink" title="12. patch"></a>12. patch</h1><p>为什么叫9patch呢？Patch的中文意思是”片，块”的意思，那这里按中文的意思来说就是9片或9块.因此可想而知这个图片会被分为9片，如下图片所示:<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/12_9patch_1.png?raw=true"><br>工具栏中的Show patches选中，中间紫色的区域就是拉伸区域。<br>工具栏中的Show content选中，看见蓝色的区域，这片区域就是显示内容的区域；比如说：这个图片宽有30px,我们把下面的那一条线的横向的第20px到25px画上了黑点，那么这个图片设置成某个组件的背景后，这个组件的paddingleft就会设置成20dp,paddingRight就会设置成5dp,如果再在布局文件里面设置这两个值，那个这里画的黑点就不起作用了。</p>
<p>工具栏中的Show bad patches选中，可能会出现下图效果：<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/12_9patch_2.png?raw=true"><br>其中被选中的3块不符合要求。这里它是根据什么来判断这个绘制的结果不符合要求呢？怎么就认为这三块不符合要求呢？它是根据左侧的黑色的小点所对过来的部分里面的每一个像素点的颜色是否一样。如果像素存在差异，当背景变大的时候就有两种颜色要被重复的绘制，系统就不知道到底绘制这两种颜色哪一种多一点，因此这个工具建议被拉伸的区域只能选择一种颜色。  </p>
<p>如果对结果要求比较高的,右下角坐标显示区域就起作用了。</p>
<h1 id="13-Fragment的使用总结"><a href="#13-Fragment的使用总结" class="headerlink" title="13. Fragment的使用总结"></a>13. Fragment的使用总结</h1><p>1、replace和add方式的区别</p>
<p>replace 是先remove掉相同containerViewId的所有fragment，然后在add当前的这个fragment。  </p>
<blockquote>
<p>Replace an existing fragment that was added to a container. This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.</p>
</blockquote>
<p>add 是把一个fragment添加到一个容器 container 里。  </p>
<blockquote>
<p>Add a fragment to the activity state. This fragment may optionally also have its view (if Fragment.onCreateView returns non-null) into a container view of the activity.</p>
</blockquote>
<p>而至于返回键，这个跟事务有关，跟使用add还是replace没有任何关系。</p>
<p>2、采用replace时的生命周期流转</p>
<p>加载fragment<br>09-09 17:17:40.906 E: LifeCycle01Fragment onAttach<br>09-09 17:17:40.906 E: LifeCycle01Fragment onCreate<br>09-09 17:17:40.911 E: LifeCycle01Fragment onCreateView<br>09-09 17:17:40.912 E: LifeCycle01Fragment onViewCreated<br>09-09 17:17:40.912 E: LifeCycle01Fragment onActivityCreated<br>09-09 17:17:40.912 E: LifeCycle01Fragment onStart<br>09-09 17:17:40.912 E: LifeCycle01Fragment onResume  </p>
<p>屏幕灭掉<br>09-09 16:37:30.910 E: LifeCycle01Fragment onPause<br>09-09 16:37:30.953 E: LifeCycle01Fragment onSaveInstanceState<br>09-09 16:37:30.953 E: LifeCycle01Fragment onStop  </p>
<p>点亮屏幕<br>09-09 16:38:05.967 E: LifeCycle01Fragment onStart<br>09-09 16:38:05.976 E: LifeCycle01Fragment onResume  </p>
<p>切换到其他的fragment<br>09-09 16:38:30.691 E: LifeCycle01Fragment onPause<br>09-09 16:38:30.691 E: LifeCycle01Fragment onStop<br>09-09 16:38:30.691 E: LifeCycle01Fragment onDestroyView<br>09-09 16:38:30.691 E: LifeCycle01Fragment onDestroy<br>09-09 16:38:30.691 E: LifeCycle01Fragment onDetach  </p>
<p>切换回本身（相当于重新加载fragment）<br>09-09 17:19:19.368 E: LifeCycle01Fragment onAttach<br>09-09 17:19:19.368 E: LifeCycle01Fragment onCreate<br>09-09 17:19:19.371 E: LifeCycle01Fragment onCreateView<br>09-09 17:19:19.372 E: LifeCycle01Fragment onViewCreated<br>09-09 17:19:19.372 E: LifeCycle01Fragment onActivityCreated<br>09-09 17:19:19.372 E: LifeCycle01Fragment onStart<br>09-09 17:19:19.372 E: LifeCycle01Fragment onResume  </p>
<p>回到桌面<br>09-09 16:39:49.689 E: LifeCycle01Fragment onPause<br>09-09 16:39:49.803 E: LifeCycle01Fragment onSaveInstanceState<br>09-09 16:39:49.803 E: LifeCycle01Fragment onStop  </p>
<p>回到应用<br>09-09 16:40:10.743 E: LifeCycle01Fragment onStart<br>09-09 16:40:10.743 E: LifeCycle01Fragment onResume  </p>
<p>退出应用<br>09-09 16:44:06.357 E: LifeCycle01Fragment onPause<br>09-09 16:44:06.662 E: LifeCycle01Fragment onStop<br>09-09 16:44:06.663 E: LifeCycle01Fragment onDestroyView<br>09-09 16:44:06.663 E: LifeCycle01Fragment onDestroy<br>09-09 16:44:06.663 E: LifeCycle01Fragment onDetach  </p>
<p>采用replace方式的生命周期相对比较简单，因为replace的机制是remove掉相同containerViewId的fragment，再重新加载一把fragment。</p>
<p>3、采用add - show - hide方式的生命周期流转</p>
<p>加载fragment<br>09-09 17:14:04.440 E: LifeCycle01Fragment onAttach<br>09-09 17:14:04.440 E: LifeCycle01Fragment onCreate<br>09-09 17:14:04.445 E: LifeCycle01Fragment onCreateView<br>09-09 17:14:04.446 E: LifeCycle01Fragment onViewCreated<br>09-09 17:14:04.446 E: LifeCycle01Fragment onActivityCreated<br>09-09 17:14:04.446 E: LifeCycle01Fragment onStart<br>09-09 17:14:04.446 E: LifeCycle01Fragment onResume  </p>
<p>屏幕灭掉<br>09-09 16:37:30.910 E: LifeCycle01Fragment onPause<br>09-09 16:37:30.953 E: LifeCycle01Fragment onSaveInstanceState<br>09-09 16:37:30.953 E: LifeCycle01Fragment onStop  </p>
<p>点亮屏幕<br>09-09 16:38:05.967 E: LifeCycle01Fragment onStart<br>09-09 16:38:05.976 E: LifeCycle01Fragment onResume  </p>
<p>切换到其他的fragment<br>没有执行到生命周期方法  </p>
<p>切回本身（addToBackStack的情况下）<br>09-09 17:14:53.309 E: LifeCycle01Fragment onPause<br>09-09 17:14:53.309 E: LifeCycle01Fragment onStop<br>09-09 17:14:53.309 E: LifeCycle01Fragment onDestroyView<br>09-09 17:14:53.310 E: LifeCycle01Fragment onDestroy<br>09-09 17:14:53.310 E: LifeCycle01Fragment onDetach  </p>
<p>回到桌面<br>09-09 17:15:50.753 E: LifeCycle01Fragment onPause<br>09-09 17:15:50.855 E: LifeCycle01Fragment onSaveInstanceState<br>09-09 17:15:50.855 E: LifeCycle01Fragment onStop  </p>
<p>回到应用<br>09-09 17:16:12.903 E: LifeCycle01Fragment onStart<br>09-09 17:16:12.903 E: LifeCycle01Fragment onResume  </p>
<p>退出应用<br>09-09 17:16:30.815 E: LifeCycle01Fragment onPause<br>09-09 17:16:30.815 E: LifeCycle01Fragment onStop<br>09-09 17:16:30.815 E: LifeCycle01Fragment onDestroyView<br>09-09 17:16:30.816 E: LifeCycle01Fragment onDestroy<br>09-09 17:16:30.816 E: LifeCycle01Fragment onDetach  </p>
<p>这种方式有个值得注意的地方是切换到其他framgent时，并没有执行生命周期。❓</p>
<p>与Activity生命周期的对比<br><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem//13_fragment_lifecycle.png?raw=true"></p>
<p>对于replace和add方式的选择，官方文档解释说：replace()这个方法只是在上一个Fragment不再需要时采用的简便方法。正确的切换方式是add()，切换时hide()，add()另一个Fragment；再次切换时，只需hide()当前，show()另一个。这样就能做到多个Fragment切换不重新实例化。</p>
<p>fragment的生命周期与activity的生命周期的一个关键区别就在于：fragment的生命周期方法是由托管acitivity而不是操作系统调用的。操作系统无从知晓activity用来管理视图的fragment。fragment的使用是activity自己内部的使用。</p>
<p>4、addToBackStack<br>对于是否要加transaction.addToBackStack(null);也就是将Fragment加入到回退栈。官方的说法是取决于你是否要在回退的时候显示上一个Fragment。</p>
<h1 id="14-Math中对于小数的处理"><a href="#14-Math中对于小数的处理" class="headerlink" title="14. Math中对于小数的处理"></a>14. Math中对于小数的处理</h1><p>09-11 10:18:14.193 I: Math.ceil(109.82934) = 110.0<br>09-11 10:18:14.193 I: Math.floor(109.82934) = 109.0<br>09-11 10:18:14.193 I: Math.round(109.82934) = 110<br>09-11 10:18:14.194 I: DecimalFormat 0.00 会四舍五入小数部分, 109.82964 约等于 109.83<br>09-11 10:18:14.194 I: DecimalFormat #.00 会四舍五入小数部分, 109.82964 约等于 109.83<br>09-11 10:18:14.195 I: String format %.2f 会四舍五入小数部分, 109.82964 约等于 109.83<br>09-11 10:18:14.196 I: BigDecimal  3位小数 BigDecimal.ROUND_HALF_UP 会四舍五入小数部分, 109.82964 约等于 109.830<br>09-11 10:18:14.196 I: BigDecimal  3位小数 BigDecimal.ROUND_DOWN 直接舍弃小数部分, 109.82964 约等于 109.829<br>09-11 10:18:14.209 I: float型转json  : {“name”:”Jack”,”score”:0.01}  </p>
<h1 id="15-开发经验整理"><a href="#15-开发经验整理" class="headerlink" title="15. 开发经验整理"></a>15. 开发经验整理</h1><p>① 对于图片的处理，务必考虑使用缩略图<br>② 类似订单状态和货架状态的需求，在有很多个状态的情况下，在开发之前最好整理各个状态对应的操作和文案；同时尽量做成一个Activity，避免跳转的时候跳转多界面的处理，同时对外的入参最好也只依赖一个orderId或者goodsId之类的，不要传递完整的对象，因为有可能其他模块提供不了完整对象。<br>③ 订单的多个状态下，写了多个activity去匹配，这样的缺点是当有消息推送时，不能根据一个orderId准确的知道需要跳转到哪个界面去。  </p>
<h1 id="16-ExpandableListView"><a href="#16-ExpandableListView" class="headerlink" title="16. ExpandableListView"></a>16. ExpandableListView</h1><p>① 更改箭头的位置<br>调用setGroupIndicator(null);可以隐藏指示器  </p>
<p>可以在getGroupView中根据isExpanded来动态显示上箭头和下箭头</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">getGroupView</span><span class="params">(<span class="keyword">final</span> <span class="type">int</span> groupPosition, <span class="type">boolean</span> isExpanded, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isExpanded) &#123;</span><br><span class="line">        <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeResource(context.getResources(), R.mipmap.icon_arrow_down_grey);</span><br><span class="line">        <span class="type">BitmapDrawable</span> <span class="variable">bitmapDrawable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BitmapDrawable</span>(context.getResources(), bitmap);</span><br><span class="line">        groupViewHolder.tv_game_schedule_num.setCompoundDrawablesWithIntrinsicBounds(<span class="literal">null</span>, <span class="literal">null</span>, bitmapDrawable, <span class="literal">null</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeResource(context.getResources(), R.mipmap.icon_arrow_up_grey);</span><br><span class="line">        <span class="type">BitmapDrawable</span> <span class="variable">bitmapDrawable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BitmapDrawable</span>(context.getResources(), bitmap);</span><br><span class="line">        groupViewHolder.tv_game_schedule_num.setCompoundDrawablesWithIntrinsicBounds(<span class="literal">null</span>, <span class="literal">null</span>, bitmapDrawable, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> convertView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>② BaseExpandableListAdapter点击时，影响其他item的问题<br><strong>问题</strong>：造成此问题的原因是setGroupViewListener方法中先去获取了ExpandableListView当前的收起/展开状态，然后根据此状态再去调用collapseGroup或expandGroup，最后立即通过ExpandableListView.isGroupExpanded获取此时的收起/展开状态，此时的状态是不准确的。  </p>
<p><strong>解决方案</strong>：在调用collapseGroup或expandGroup方法之后，监听onGroupExpanded和onGroupCollapsed方法，在其中调用notifyDataSetChanged();去刷新界面，然后在getGroupView中根据isExpanded去动态改变UI的上箭头还是下箭头。  </p>
<p>③ BaseExpandableListAdapter notifyDataSetChange()的问题<br><strong>问题</strong>：调用notifyDataSetChange()无效  </p>
<p><strong>分析</strong>：开始以为是notifyDataSetChange没有刷新造成的，后台debug跟进到Adapter的getGroupView时，发现调用了getGroupView方法，也就是系统API执行了刷新操作，只是getGroupView中自己的逻辑处理有问题。当前如果是没有数据的情况，getGroupView展示的是item_no_data_layout布局，但是如果有数据进来，调用notifyDataSetChange时，会执行到getGroupView，此时会复用item_no_data_layout布局，但是此布局并不是我们的数据展示布局，所以要再加一层判断，如viewHolder==null，需要再加载一次item_offical_game布局到convertView  </p>
<p><strong>解决方案</strong>：双层判断viewHolder==null，如果为null，需要再加载一次item_offical_game布局到convertView  </p>
<p><img src="https://github.com/LeeeYou/Img/blob/master/fixmyproblem/16_expandlistview.png?raw=true"></p>
<h1 id="17-JSONArray-，JSONObject-json相互转换"><a href="#17-JSONArray-，JSONObject-json相互转换" class="headerlink" title="17. JSONArray ，JSONObject , json相互转换"></a>17. JSONArray ，JSONObject , json相互转换</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * jsonobject , jsonarray , json 互转</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Problem10_JSONArray_Activity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_jsonarray);</span><br><span class="line"></span><br><span class="line">        jsonStringTojsonObj();</span><br><span class="line">        jsonArrayTojsonObj();</span><br><span class="line">        jsonObjTojsonObj();</span><br><span class="line">        listobjTojsonArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">listobjTojsonArray</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;String&gt; imageList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        imageList.add(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/51c1e24b6b821c916f732c2aa5b1dc9f.jpg&quot;</span>);</span><br><span class="line">        imageList.add(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/8ad331112d30453d2ace4c31903c5c55.jpg&quot;</span>);</span><br><span class="line">        imageList.add(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/839f7a8407047bab2d7a721c114912df.jpg&quot;</span>);</span><br><span class="line">        imageList.add(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/369ca74245ebc32d512eae501e7de807.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>(<span class="keyword">new</span> <span class="title class_">Gson</span>().toJson(imageList));</span><br><span class="line"></span><br><span class="line">            Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;listobjTojsonArray Gson ---- &quot;</span> + jsonArray.toString());</span><br><span class="line"></span><br><span class="line">            <span class="type">JSONArray</span> <span class="variable">jsonArray2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>(imageList);</span><br><span class="line">            Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;listobjTojsonArray 直接转换 ---- &quot;</span> + jsonArray2.toString());</span><br><span class="line"></span><br><span class="line">            Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;-------------------- &quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">jsonObjTojsonObj</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/51c1e24b6b821c916f732c2aa5b1dc9f.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/8ad331112d30453d2ace4c31903c5c55.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/839f7a8407047bab2d7a721c114912df.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/369ca74245ebc32d512eae501e7de807.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            jsonObject.put(<span class="string">&quot;imageList&quot;</span>, jsonArray);</span><br><span class="line">            jsonObject.put(<span class="string">&quot;age&quot;</span>, <span class="number">28</span>);</span><br><span class="line">            jsonObject.put(<span class="string">&quot;nickName&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//直接调用toString可以将JSONObject转换成json字符串</span></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonObjTojsonObj ---- &quot;</span> + jsonObject.toString());</span><br><span class="line"></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonObjTojsonObj Gson ---- &quot;</span> + <span class="keyword">new</span> <span class="title class_">Gson</span>().toJson(jsonObject));</span><br><span class="line"></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;-------------------- &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">jsonArrayTojsonObj</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/51c1e24b6b821c916f732c2aa5b1dc9f.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/8ad331112d30453d2ace4c31903c5c55.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/839f7a8407047bab2d7a721c114912df.jpg&quot;</span>);</span><br><span class="line">        jsonArray.put(<span class="string">&quot;http://quncao-app.b0.upaiyun.com/369ca74245ebc32d512eae501e7de807.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//直接调用toString可以将JSONArray转换成json字符串</span></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonArrayTojsonObj ---- &quot;</span> + jsonArray.toString());</span><br><span class="line"></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;-------------------- &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">jsonStringTojsonObj</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">imageObject</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;imageList\&quot;:[&#123;\&quot;id\&quot;: 292,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/51c1e24b6b821c916f732c2aa5b1dc9f.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 289,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/8ad331112d30453d2ace4c31903c5c55.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 288,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/839f7a8407047bab2d7a721c114912df.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 291,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/369ca74245ebc32d512eae501e7de807.jpg\&quot;&#125;]&#125;&quot;</span>;</span><br><span class="line">        <span class="type">FixedPrice</span> <span class="variable">fixedPrice</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>().fromJson(imageObject, FixedPrice.class);</span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonStringTojsonObj ---- &quot;</span> + fixedPrice.toString());</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">imageArray</span> <span class="operator">=</span> <span class="string">&quot;[&#123;\&quot;id\&quot;: 292,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/51c1e24b6b821c916f732c2aa5b1dc9f.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 289,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/8ad331112d30453d2ace4c31903c5c55.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 288,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/839f7a8407047bab2d7a721c114912df.jpg\&quot;&#125;,&#123;\&quot;id\&quot;: 291,\&quot;imageUrl\&quot;: \&quot;http://quncao-app.b0.upaiyun.com/369ca74245ebc32d512eae501e7de807.jpg\&quot;&#125;]&quot;</span>;</span><br><span class="line">        List&lt;Image&gt; imageList = <span class="keyword">new</span> <span class="title class_">Gson</span>().fromJson(imageArray, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;List&lt;Image&gt;&gt;() &#123;</span><br><span class="line">        &#125;.getType());</span><br><span class="line"></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonStringTojsonObj gson fromJson ---- &quot;</span> + fixedPrice.toString());</span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;jsonStringTojsonObj TypeToken ---- &quot;</span> + imageList.toString());</span><br><span class="line"></span><br><span class="line">        Log.e(<span class="string">&quot;com.jsonarray&quot;</span>, <span class="string">&quot;-------------------- &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Image</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line">        <span class="keyword">public</span> String imageUrl;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Gson</span>().toJson(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">FixedPrice</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> List&lt;Image&gt; imageList;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Gson</span>().toJson(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="18-记录bug-Fragment-already-active"><a href="#18-记录bug-Fragment-already-active" class="headerlink" title="18. 记录bug:Fragment already active"></a>18. 记录bug:Fragment already active</h1><p><strong>现象</strong>：<br>反复进入退出进入退出某一个fragment界面导致<br><strong>分析</strong>：<br>在 Fragment 没有被添加到 FragmentManager 之前，我们可以通过 Fragment.setArguments() 来设置参数，并在 Fragment 中，使用 getArguments() 来取得参数。在 Fragment 被添加到 FragmentManager 后，一旦被使用，我们再次调用 setArguments() 将会导致 java.lang.IllegalStateException: Fragment already active 异常。<br><strong>解决</strong>：<br>1、可以在add()方法时候,先判断currentFragment.isAdded();<br>2、可以使用setter和getter Fragment的属性方法进行数据的存储和获取;  </p>
<h1 id="19-记录bug-调用fragment的replace加载显示异常的问题"><a href="#19-记录bug-调用fragment的replace加载显示异常的问题" class="headerlink" title="19. 记录bug:调用fragment的replace加载显示异常的问题"></a>19. 记录bug:调用fragment的replace加载显示异常的问题</h1><p><strong>现象</strong>：<br>现有FragmentA和FragmentB，当前显示FragmentA，用fragmentTransaction调用replace加载FragmentB时，可能会出现加载不成功的情况，显示的还是FragmentA<br><strong>分析</strong>：<br>使用replace会带来一个问题，FragmentA在replace后会被销毁，会调用其生命周期函数(onDestoryView()、onPause()、onDestory())。如果频繁地replace Fragment会不断创建新实例并销毁旧的，无法重用。经过多次切换后，会导致Fragment上的View无法加载的问题，此时就会出现点击切换图标，还是显示FragmentA<br><strong>解决</strong>：<br>可以利用add()方法配合show()和hide()来弥补replace带来的低效问题  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideFragments</span><span class="params">(FragmentTransaction transaction)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (indexFragment != <span class="literal">null</span>) &#123;</span><br><span class="line">            transaction.hide(indexFragment);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newVenueFragment != <span class="literal">null</span>) &#123;</span><br><span class="line">            transaction.hide(newVenueFragment);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sportVenueFragment != <span class="literal">null</span>) &#123;</span><br><span class="line">            transaction.hide(sportVenueFragment);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (messageMainFragment != <span class="literal">null</span>) &#123;</span><br><span class="line">            transaction.hide(messageMainFragment);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mineFragment != <span class="literal">null</span>) &#123;</span><br><span class="line">            transaction.hide(mineFragment);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//再调用如下方法来显示你要替换的fragment</span></span><br><span class="line">fragmentTransaction.show(indexFragment);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="20-ScrollView中嵌套ListView时，ListView抢夺焦点问题"><a href="#20-ScrollView中嵌套ListView时，ListView抢夺焦点问题" class="headerlink" title="20. ScrollView中嵌套ListView时，ListView抢夺焦点问题"></a>20. ScrollView中嵌套ListView时，ListView抢夺焦点问题</h1><p>ListView嵌入到可滚动的控件中时，ListView会抢夺页面的焦点。对于此类问题的终极解决方案是：使用属性 <strong>descendantFocusabilit</strong>。<br>android:descendantFocusability属性共有三个取值<br>1 beforeDescendants：viewgroup 会优先其子类控件而获取到焦点<br>2 afterDescendants： viewgroup 只有当其子类控件不需要获取焦点时才获取焦点<br>3 blocksDescendants：viewgroup 会覆盖子类控件而直接获得焦点   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.quncao.pulltorefreshlib.PullToRefreshScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/pullToRefreshScrollView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#e8e8e8&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:descendantFocusability</span>=<span class="string">&quot;blocksDescendants&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="21-ScrollView-MATCH-PARENT-无法填满屏幕"><a href="#21-ScrollView-MATCH-PARENT-无法填满屏幕" class="headerlink" title="21. ScrollView MATCH_PARENT 无法填满屏幕"></a>21. ScrollView MATCH_PARENT 无法填满屏幕</h1><p>在ScrollView中嵌套一个RelativeLayout,并设置MATCH_PARENT给RelativeLayout。此时想在屏幕底部放置一个Button会出现无法正确的固定到底部。<br>通过设置ScrollView的android:fillViewport为true可以解决此问题。</p>
<p>当ScrollView未设置fillViewport=“true”时, 里面的元素(比如LinearLayout)会按照wrap_content来计算(不论它是否设了”match_parent”),而如果LinearLayout的元素设置了match_parent,那么也是不管用的。因为LinearLayout依赖里面的元素，而里面的元素又依赖LinearLayout,这样自相矛盾。所以里面元素设置了match_parent，也会当做wrap_content来计算。</p>
<h1 id="22-判断RecyclerView是否可以垂直滚动"><a href="#22-判断RecyclerView是否可以垂直滚动" class="headerlink" title="22. 判断RecyclerView是否可以垂直滚动"></a>22. 判断RecyclerView是否可以垂直滚动</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">RecyclerView.canScrollVertically(<span class="number">1</span>)的值表示是否能向上滚动，<span class="literal">false</span>表示已经滚动到底部</span><br><span class="line">RecyclerView.canScrollVertically(-<span class="number">1</span>)的值表示是否能向下滚动，<span class="literal">false</span>表示已经滚动到顶部</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面这段代码是在PtrFrameLayout中嵌套RecyclerView的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ptrFrame.setPtrHandler(<span class="keyword">new</span> <span class="title class_">PtrHandler</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefreshBegin</span><span class="params">(PtrFrameLayout frame)</span> &#123;</span><br><span class="line">        onRefreshBefore();</span><br><span class="line"></span><br><span class="line">        fetchDataFromServer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCanDoRefresh</span><span class="params">(PtrFrameLayout frame, View content, View header)</span> &#123;</span><br><span class="line">        <span class="comment">// 默认实现，根据实际情况做改动</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> !mRecyclerView.canScrollVertically(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="23-LoaderManager的使用"><a href="#23-LoaderManager的使用" class="headerlink" title="23. LoaderManager的使用"></a>23. LoaderManager的使用</h1><p>1.Loader特性：<br>(1).对于每个Activity或者Fragment都可用<br>(2).提供异步加载数据<br>(3).监视数据资源，当内容改变时重新更新<br>(4).当配置改变时，自动重新连接最新的cursor，故不需要重新查询数据  </p>
<p>2.Loader相关类接口<br>(1).LoaderManager<br>对于每个activity或者fragment只存在一个与之相关的LoaderManager对象,该LoaderManager对象可以存在多个可供管理loader对象。<br>(2).LoaderManager.LoaderCallbacks<br>LoaderManager.LoaderCallbacks是个回掉接口，用于客户端与LoaderManager的交互，loader对象就是在其接口的onCreateLoader()方法中得到，在使用时需要覆盖其方法。<br>(3).CursorLoader<br>CursorLoader是AsyncTaskLoader的子类，通过它可以查询ContentResolver并返回一个Cursor对象，并使用该cursor对象在后台线程执行查询操作，以不至于会阻塞主线程，从一个内容提供者去异步加载数据是CursorLoader对象最大用处。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GalleryFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> <span class="keyword">implements</span> <span class="title class_">LoaderManager</span>.LoaderCallbacks&lt;Cursor&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> GalleryAdapter mGalleryAdapter;</span><br><span class="line">    <span class="keyword">private</span> ImageLoader imageLoader;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 切换目录</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dirId   目录id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dirName 目录名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">switchDir</span><span class="params">(<span class="type">int</span> dirId, String dirName)</span> &#123;</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        bundle.putInt(<span class="string">&quot;dirId&quot;</span>, dirId);</span><br><span class="line">        getLoaderManager().restartLoader(<span class="number">0</span>, bundle, <span class="built_in">this</span>);</span><br><span class="line">        title.setText(dirName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStop();</span><br><span class="line">        imageLoader.stop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Loader&lt;Cursor&gt; <span class="title function_">onCreateLoader</span><span class="params">(<span class="type">int</span> id, Bundle args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">select</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (args != <span class="literal">null</span>) &#123;</span><br><span class="line">            dirId = args.getInt(<span class="string">&quot;dirId&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (dirId != <span class="number">0</span>) &#123;</span><br><span class="line">                select = String.format(<span class="string">&quot;%s == %s&quot;</span>, MediaStore.Images.Media.BUCKET_ID, dirId);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Uri</span> <span class="variable">baseUri</span> <span class="operator">=</span> MediaStore.Images.Media.EXTERNAL_CONTENT_URI;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CursorLoader</span>(getActivity(),</span><br><span class="line">                baseUri,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;MediaStore.Images.Media._ID, MediaStore.Images.Media.DATA,&#125;,</span><br><span class="line">                select,</span><br><span class="line">                <span class="literal">null</span>,</span><br><span class="line">                MediaStore.Images.Media.DATE_TAKEN + <span class="string">&quot; DESC&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadFinished</span><span class="params">(Loader&lt;Cursor&gt; loader, Cursor data)</span> &#123;</span><br><span class="line">        mGalleryAdapter.swapCursor(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoaderReset</span><span class="params">(Loader&lt;Cursor&gt; loader)</span> &#123;</span><br><span class="line">        mGalleryAdapter.swapCursor(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="24-不透明度16进制值"><a href="#24-不透明度16进制值" class="headerlink" title="24. 不透明度16进制值"></a>24. 不透明度16进制值</h1><table>
<thead>
<tr>
<th align="center">不透明度</th>
<th align="center">16进制值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">100%</td>
<td align="center">FF</td>
</tr>
<tr>
<td align="center">95%</td>
<td align="center">F2</td>
</tr>
<tr>
<td align="center">90%</td>
<td align="center">E6</td>
</tr>
<tr>
<td align="center">85%</td>
<td align="center">D9</td>
</tr>
<tr>
<td align="center">80%</td>
<td align="center">CC</td>
</tr>
<tr>
<td align="center">75%</td>
<td align="center">BF</td>
</tr>
<tr>
<td align="center">70%</td>
<td align="center">B3</td>
</tr>
<tr>
<td align="center">65%</td>
<td align="center">A6</td>
</tr>
<tr>
<td align="center">60%</td>
<td align="center">99</td>
</tr>
<tr>
<td align="center">55%</td>
<td align="center">8C</td>
</tr>
<tr>
<td align="center">50%</td>
<td align="center">80</td>
</tr>
<tr>
<td align="center">45%</td>
<td align="center">73</td>
</tr>
<tr>
<td align="center">40%</td>
<td align="center">66</td>
</tr>
<tr>
<td align="center">35%</td>
<td align="center">59</td>
</tr>
<tr>
<td align="center">30%</td>
<td align="center">4D</td>
</tr>
<tr>
<td align="center">25%</td>
<td align="center">40</td>
</tr>
<tr>
<td align="center">20%</td>
<td align="center">33</td>
</tr>
<tr>
<td align="center">15%</td>
<td align="center">26</td>
</tr>
<tr>
<td align="center">10%</td>
<td align="center">1A</td>
</tr>
<tr>
<td align="center">5%</td>
<td align="center">0D</td>
</tr>
<tr>
<td align="center">0%</td>
<td align="center">00</td>
</tr>
</tbody></table>
<h1 id="25-髙扇入低扇出"><a href="#25-髙扇入低扇出" class="headerlink" title="25. 髙扇入低扇出"></a>25. 髙扇入低扇出</h1><p>在软件设计中，扇入和扇出的概念是指应用程序模块之间的层次调用情况。按照结构化设计方法，一个应用程序是由多个功能相对独立的模块所组成。扇入：是指直接调用该模块的上级模块的个数。扇入大表示模块的复用程序高。</p>
<p>扇出：是指该模块直接调用的下级模块的个数。扇出大表示模块的复杂度高，需要控制和协调过多的下级模块；但扇出过小（例如总是1）也不好。扇出过大一般是因为缺乏中间层次，应该适当增加中间层次的模块。扇出太小时可以把下级模块进一步分解成若干个子功能模块，或者合并到它的上级模块中去。</p>
<p>设计良好的软件结构，通常顶层扇出比较大，中间扇出小，底层模块则有大扇入。</p>
<h1 id="26-What-How-Why"><a href="#26-What-How-Why" class="headerlink" title="26. What-How-Why"></a>26. What-How-Why</h1><ul>
<li>What - “What is it?” 你要搞清楚某个东东是【什么】样子的？有【什么】用处？有【什么】特性？有【什么】语法？</li>
<li>How - “How to do?” 你要搞清楚某个东西，其内部是【如何】运作的？【如何】实现的？</li>
<li>Why - 就是搞清楚某个东西【为什么】设计成这样？【为什么】不是另外的样子？这样的设计有什么讲究？</li>
</ul>
<h1 id="27-网络框架应具备的功能"><a href="#27-网络框架应具备的功能" class="headerlink" title="27. 网络框架应具备的功能"></a>27. 网络框架应具备的功能</h1><h2 id="27-1-OkHttp"><a href="#27-1-OkHttp" class="headerlink" title="27.1. OkHttp"></a>27.1. OkHttp</h2><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/sunshine2050_csdn/article/details/50819261">OkHttp3升级实践与之前2.0对比</a></p>
<ul>
<li>提供一个合适的辅助类</li>
<li>基本的get，post请求</li>
<li>基本的同步和异步请求</li>
<li>下载文件以及进度回调<ul>
<li>对于超过1MB的响应body，应使用流的方式来处理body。</li>
</ul>
</li>
<li>取消某个网络请求</li>
<li>OkHttp参数配置</li>
<li>配置日志打印拦截器</li>
<li>配置网络连接拦截器</li>
<li>参考 <a target="_blank" rel="noopener" href="https://github.com/hongyangAndroid/okhttp-utils">https://github.com/hongyangAndroid/okhttp-utils</a></li>
<li>单例方式提供OkHttpClient</li>
</ul>
<h2 id="27-2-Retrofit"><a href="#27-2-Retrofit" class="headerlink" title="27.2. Retrofit"></a>27.2. Retrofit</h2><ul>
<li>使用原生的Call类型处理返回结果</li>
<li>使用RxJava方式处理返回结果</li>
<li>解决Https访问的问题，SSLSocketFactory</li>
<li>解决直接返回String类型数据的问题，StringConverterFactory <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/308f3c54abdd">http://www.jianshu.com/p/308f3c54abdd</a></li>
<li>配置统一的OkHttpClient给Retrofit</li>
<li>处理先后访问两个网络请求的情况[需求：获取某人的某个项目下所有关注者自己的所有项目列表]</li>
<li>下载jar包</li>
<li>配置网络连接拦截器</li>
<li>对返回结果再封装</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/iBlogWebsite/tags/%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/" rel="tag"># 知识汇总</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/iBlogWebsite/2017/03/14/2017/2017-03-14-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%9C%88%E4%BA%AE%E4%B8%8E%E5%85%AD%E4%BE%BF%E5%A3%AB/" rel="prev" title="读书笔记之月亮与六便士">
      <i class="fa fa-chevron-left"></i> 读书笔记之月亮与六便士
    </a></div>
      <div class="post-nav-item">
    <a href="/iBlogWebsite/2017/03/28/2017/2017-03-28-%20%E6%A8%A1%E6%9D%BF/" rel="next" title="Markdown模板">
      Markdown模板 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-ImageView%E7%9A%84background%E5%92%8Csrc%E7%9A%84%E4%B8%8D%E5%90%8C"><span class="nav-number">1.</span> <span class="nav-text">1. ImageView的background和src的不同</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Glide%E5%8A%A0%E8%BD%BD%E5%9C%86%E5%BD%A2%E5%9B%BE%E5%92%8C%E5%9C%86%E8%A7%92%E5%9B%BE"><span class="nav-number">2.</span> <span class="nav-text">2. Glide加载圆形图和圆角图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-setCompoundDrawablesWithIntrinsicBounds%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">3.</span> <span class="nav-text">3. setCompoundDrawablesWithIntrinsicBounds的优势</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E6%BB%91%E5%8A%A8%E4%BA%8B%E4%BB%B6%E5%86%B2%E7%AA%81%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">4. 滑动事件冲突的处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-shape%E8%B5%84%E6%BA%90%E6%95%B4%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">5. shape资源整理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E8%AE%B0%E5%BD%95bug-Manifest-merger-failed-error"><span class="nav-number">6.</span> <span class="nav-text">6. 记录bug:Manifest merger failed error</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E6%95%B4%E7%90%86ripple"><span class="nav-number">7.</span> <span class="nav-text">7. 整理ripple</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E6%95%B4%E7%90%86fragment-universalAdapter-notify%E4%B8%8D%E6%88%90%E5%8A%9F%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-number">8.</span> <span class="nav-text">8. 整理fragment universalAdapter notify不成功的原因</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E8%AE%B0%E5%BD%95bug%EF%BC%9ArecyclerView%E5%9C%A8fragment%E4%B8%AD-notifyDataSetChange%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">9.</span> <span class="nav-text">9. 记录bug：recyclerView在fragment中 notifyDataSetChange不起作用的问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-EventBus%E7%B2%98%E6%80%A7%E4%BA%8B%E4%BB%B6"><span class="nav-number">10.</span> <span class="nav-text">10. EventBus粘性事件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E6%9C%BA%E5%88%B6"><span class="nav-number">11.</span> <span class="nav-text">11. 事件传递机制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-patch"><span class="nav-number">12.</span> <span class="nav-text">12. patch</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-Fragment%E7%9A%84%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="nav-number">13.</span> <span class="nav-text">13. Fragment的使用总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-Math%E4%B8%AD%E5%AF%B9%E4%BA%8E%E5%B0%8F%E6%95%B0%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-number">14.</span> <span class="nav-text">14. Math中对于小数的处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%95%B4%E7%90%86"><span class="nav-number">15.</span> <span class="nav-text">15. 开发经验整理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-ExpandableListView"><span class="nav-number">16.</span> <span class="nav-text">16. ExpandableListView</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-JSONArray-%EF%BC%8CJSONObject-json%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="nav-number">17.</span> <span class="nav-text">17. JSONArray ，JSONObject , json相互转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-%E8%AE%B0%E5%BD%95bug-Fragment-already-active"><span class="nav-number">18.</span> <span class="nav-text">18. 记录bug:Fragment already active</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19-%E8%AE%B0%E5%BD%95bug-%E8%B0%83%E7%94%A8fragment%E7%9A%84replace%E5%8A%A0%E8%BD%BD%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">19.</span> <span class="nav-text">19. 记录bug:调用fragment的replace加载显示异常的问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#20-ScrollView%E4%B8%AD%E5%B5%8C%E5%A5%97ListView%E6%97%B6%EF%BC%8CListView%E6%8A%A2%E5%A4%BA%E7%84%A6%E7%82%B9%E9%97%AE%E9%A2%98"><span class="nav-number">20.</span> <span class="nav-text">20. ScrollView中嵌套ListView时，ListView抢夺焦点问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#21-ScrollView-MATCH-PARENT-%E6%97%A0%E6%B3%95%E5%A1%AB%E6%BB%A1%E5%B1%8F%E5%B9%95"><span class="nav-number">21.</span> <span class="nav-text">21. ScrollView MATCH_PARENT 无法填满屏幕</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#22-%E5%88%A4%E6%96%ADRecyclerView%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E5%9E%82%E7%9B%B4%E6%BB%9A%E5%8A%A8"><span class="nav-number">22.</span> <span class="nav-text">22. 判断RecyclerView是否可以垂直滚动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#23-LoaderManager%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">23.</span> <span class="nav-text">23. LoaderManager的使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#24-%E4%B8%8D%E9%80%8F%E6%98%8E%E5%BA%A616%E8%BF%9B%E5%88%B6%E5%80%BC"><span class="nav-number">24.</span> <span class="nav-text">24. 不透明度16进制值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#25-%E9%AB%99%E6%89%87%E5%85%A5%E4%BD%8E%E6%89%87%E5%87%BA"><span class="nav-number">25.</span> <span class="nav-text">25. 髙扇入低扇出</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#26-What-How-Why"><span class="nav-number">26.</span> <span class="nav-text">26. What-How-Why</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#27-%E7%BD%91%E7%BB%9C%E6%A1%86%E6%9E%B6%E5%BA%94%E5%85%B7%E5%A4%87%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-number">27.</span> <span class="nav-text">27. 网络框架应具备的功能</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#27-1-OkHttp"><span class="nav-number">27.1.</span> <span class="nav-text">27.1. OkHttp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27-2-Retrofit"><span class="nav-number">27.2.</span> <span class="nav-text">27.2. Retrofit</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liyou"
      src="https://avatars1.githubusercontent.com/u/6735624?s=460&v=4">
  <p class="site-author-name" itemprop="name">Liyou</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/iBlogWebsite/archives/">
        
          <span class="site-state-item-count">110</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/iBlogWebsite/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/iBlogWebsite/tags/">
          
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Leeeyou" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Leeeyou" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liyou</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/iBlogWebsite/lib/anime.min.js"></script>
  <script src="/iBlogWebsite/lib/velocity/velocity.min.js"></script>
  <script src="/iBlogWebsite/lib/velocity/velocity.ui.min.js"></script>

<script src="/iBlogWebsite/js/utils.js"></script>

<script src="/iBlogWebsite/js/motion.js"></script>


<script src="/iBlogWebsite/js/schemes/muse.js"></script>


<script src="/iBlogWebsite/js/next-boot.js"></script>




  




  
<script src="/iBlogWebsite/js/local-search.js"></script>













  

  

</body>
</html>
